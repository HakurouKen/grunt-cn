<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Grunt中文社区是由网友发起的Grunt.js中文交流社区，关注前端构建工具Grunt.js的应用推广。">
    <meta name="keywords" content="Grunt.js,Grunt,web前端,前端,HTML,CSS,JavaScript,js,构建,压缩,合并,发布">
    <title>grunt.log - Grunt中文社区</title>
    <link type="image/x-icon" rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="../css/style.css">
  </head>
  <body>
    <div class="header-mask"></div>
    <div class="wrap">
      <div class="header">
        <h1>Grunt</h1>
        <h2>The JavaScript Task Runner</h2>
      </div>
      <div class="nav"><a href="#" class="logo"><img src="../images/grunt-logo.png" alt="Grunt中文社区"></a>
        <dl id="nav">
          <dt>参考文档</dt>
          <dd>
            <ul>
              <li><a href="#">新手上路</a></li>
              <li><a href="#">配置任务</a></li>
              <li><a href="#">Gruntfile范例</a></li>
              <li><a href="#">创建任务</a></li>
              <li><a href="#">创建插件</a></li>
            </ul>
          </dd>
          <dt>高级应用</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">安装Grunt</a></li>
              <li><a href="#">常见问题</a></li>
              <li><a href="#">项目脚手架</a></li>
            </ul>
          </dd>
          <dt>社区</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">参考资源</a></li>
              <li><a href="#">Grunt用户</a></li>
              <li><a href="#">参与贡献</a></li>
            </ul>
          </dd>
          <dt>升级指南</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">从0.3升级到0.4</a></li>
            </ul>
          </dd>
          <dt>Grunt插件</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">Grunt插件列表</a></li>
            </ul>
          </dd>
          <dt>API参考</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">API列表</a></li>
            </ul>
          </dd>
          <dt>其他</dt>
          <dd class="hide">
            <ul>
              <li><a href="#">内置任务</a></li>
              <li><a href="#">状态码</a></li>
            </ul>
          </dd>
        </dl>
      </div>
      <div class="main"><p>输出信息到控制器</p>

<p>查看<a href="https://github.com/gruntjs/grunt/blob/master/lib/grunt/log.js">og lib source</a>了解更多信息</p>

<h2>The log API</h2>

<p>Grunt输出看起来应该一致, 甚至是漂亮的. 因此, 有大量的日志记录方法和一些有用的模式. 所有的方法实际上记录的东西的都是链式的.</p>

<p><em>注意: 所有的<code>grunt.verbose</code>下有效的方法都酷似<code>grunt.log</code>方法, 但是如果指定<code>--verbose</code>命令行选项仅仅只记录日志.</em></p>

<h3>grunt.log.write/grunt.verbose.write</h3>

<p>记录指定的<code>msg</code>字符串, 尾部没有换行符.</p>

<pre><code>grunt.log.write(msg);
</code></pre>

<h3>grunt.log.weiteln/grunt.verbose.writeln</h3>

<p>记录指定的<code>msg</code>字符串, 尾部带有换行符.</p>

<pre><code>grunt.log.writeln([msg]);
</code></pre>

<h3>grunt.log.error/grunt.verbose.error</h3>

<p>如果省略<code>msg</code>字符串, 记录红色的<code>ERROR</code>日志, 否则记录<code>&gt;&gt; msg</code>, 尾部带有换行符.</p>

<pre><code>grunt.log.error([msg])
</code></pre>

<h3>grunt.log.errorlns/grunt.verbose.errorlns</h3>

<p>使用<code>grunt.log.error</code>记录一个错误日志, 使用<code>grunt.log.wraptext</code>每80个文本就换行.</p>

<pre><code>grunt.log/errorlns(msg)
</code></pre>

<h3>grunt.log.ok/grunt.verbose.ok</h3>

<p>如果省略<code>msg</code>字符串, 记录绿色的<code>OK</code>日志, 否则记录<code>&gt;&gt; msg</code>, 尾部带有换行符.</p>

<pre><code>grunt.log.ok([msg])
</code></pre>

<h3>grunt.log.oklns/grunt.verbose.oklns</h3>

<p>使用<code>grunt.log.ok</code>记录一个ok信息, 使用<code>grunt.log.wraptext</code>每80个文本就换行.</p>

<pre><code>grunt.log.oklns(msg)
</code></pre>

<h3>grunt.log.subhead/grunt.verbose.subhead</h3>

<p>记录指定的<code>msg</code>字符串并<strong>加粗</strong>, 尾部带有换行符</p>

<pre><code>grunt.log.subhead(msg)
</code></pre>

<h3>grunt.log.writeflags/grunt.verbose.writeflags</h3>

<p>记录一个<code>obj</code>属性列表(很好的调试标志)</p>

<pre><code>grunt.log.writeflags(obj, prefix)
</code></pre>

<h3>grunt.log.debug/grunt.verbose.debug</h3>

<p>记录一个调试信息, 但是仅仅是指定<code>--debug</code>命令行选项的情况下</p>

<pre><code>grunt.log.debug(msg)
</code></pre>

<h2>Verbose and Notverbose</h2>

<p><code>grunt.verbose</code>下的有效日志记录方法的工作都酷似它们所对应的<code>grunt.log</code>, 但是仅仅指定<code>--verbose</code>命令行选项的情况下才记录. 还有一个对应"notverbose"适用于<code>grunt.log.notverbose</code>和<code>grunt.log.verbose.or</code>. 实际上, <code>.or</code>属性也可以用于<code>verbose</code>和<code>notverbose</code>之间有效的切换两者.</p>

<h3>grunt.verbose/grunt.log.verbose</h3>

<p>这个对象包含所有的<code>grunt.log</code>方法, 但是仅仅在指定<code>--verbose</code>命令行选项情况下才是.</p>

<pre><code>grunt.verbose
</code></pre>

<h3>grunt.verbose.or/grunt.log.notverbose</h3>

<p>这个对象包含所有的<code>grunt.log</code>方法, 但是仅仅在指定<code>--verbose</code>命令行选项情况下才是.</p>

<pre><code>grunt.verbose.or
</code></pre>

<h2>工具方法</h2>

<p>这些方法实际上不记录日志, 它们只返回字符串可以用于其他方法使用.</p>

<h3>grunt.log.wordlist</h3>

<p>返回一个逗号分割的<code>arr</code>数组项目.</p>

<pre><code>grunt.log.wordlist(arr [, options])
</code></pre>

<p><code>options</code>对象可能有以下属性和默认值:</p>

<pre><code>var options = {
    // The separator string (can be colored).
    separator: ', ',
    // The array item color (specify false to not colorize).
    color: 'cyan',
};
</code></pre>

<h3>grunt.log.uncolor</h3>

<p>从字符串中移除所有的颜色信息, 使它适合测试<code>.length</code>或者可能记录到一个日志文件中.</p>

<pre><code>grunt.log.uncolor(str)
</code></pre>

<h3>grunt.log.wraptext</h3>

<p>包装<code>text</code>字符串为<code>width</code>字符并带有<code>\n</code>, 确保单词没有从中间分割, 除非绝对必要的情况</p>

<pre><code>grunt.log.wraptext(width, text)
</code></pre>

<h3>grunt.log.table</h3>

<p>包装<code>texts</code>字符串数组为<code>widths</code>宽度的字符串列数. <code>grunt.log.wraptext</code>的包装方法可以用于在列中生成输出.</p>

<pre><code>grunt.log.table(widths, texts)
</code></pre>

<h2>示例</h2>

<p>一个通用模式, 只在<code>--verbose</code>模式或(OR)中记录日志, 如果发生一个错误, 就像这样:</p>

<pre><code>grunt.registerTask('something', 'Do something interesting.', function(arg) {
    var msg = 'Doing something...';
    grunt.verbose.write(msg);
    try {
        doSomethingThatThrowsAnExceptionOnError(arg);
        // Success!
        grunt.verbose.ok();
    } catch(e) {
        // Something went wrong.
        grunt.verbose.or.write(msg).error().error(e.message);
        grunt.fail.warn('Something went wrong.');
    }
});
</code></pre>

<p>上面代码的解释:</p>

<ol>
<li><code>grunt.verbose.write(msg)</code>记录message(没有换行符), 但是只在<code>--verbose</code>模式下.</li>
<li><code>grunt.verbose.ok()</code>记录绿色的OK, 带有换行符</li>
<li><code>grunt.verbose.or.write(msg).error().error(e.message)</code>做了几件事情:
<ol><li>如果不在<code>--verbose</code>模式下<code>grunt.verbose.or.write(msg)</code>记录message(没有换行符)并返回`norverbos对象.</li>
<li><code>.error()</code>记录红色的ERROR, 带有换行符, 并且返回<code>notverbose</code>对象</li>
<li><code>.error(e.message);</code>记录实际的错误信息(返回<code>notverbose</code>对象)</li></ol></li>
<li><code>grunt.fail.warn('Something went wrong.');</code>记录嫩黄色的警告信息. 使用出口代码1退出grunt, 除非指定<code>--force</code>.</li>
</ol>

<p>看看<a href="https://github.com/gruntjs">grunt-contrib-*任务源码</a>中有更多的例子.</p></div>
    </div>
    <div class="footer">
      <div class="wrap">
        <p>Grunt.js 中文社区为开源项目，由网友创建并维护。</p>
        <p>贡献: <a href="http://www.toobug.net">Toobug</a> <a href="http://www.basecss.net">Basecss</a></p>
      </div>
      <script type="text/javascript" src="http://tajs.qq.com/stats?sId=23584984" charset="UTF-8"></script>
    </div>
  </body>
</html>